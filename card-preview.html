<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preview Card - Digital Business Card</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Screen View -->
    <div class="screen-view">
        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-gradient fixed-top no-print">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <i class="fas fa-id-card me-2"></i>Digital Business Card - Preview
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarMain">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="admin.html"><i class="fas fa-arrow-left me-1"></i>Back to Editor</a>
                        </li>
                        <li class="nav-item">
                            <button class="btn btn-light btn-sm ms-2" onclick="window.print()">
                                <i class="fas fa-print me-1"></i>Print
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="btn btn-outline-light btn-sm ms-2" id="darkModeToggle">
                                <i class="fas fa-moon"></i>
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Card View Section -->
        <div class="container my-5 py-5" style="margin-top: 100px !important;">
            <div class="text-center mb-5">
                <h1 class="display-5 fw-bold text-white mb-3">Card Preview</h1>
                <p class="lead text-white-50">This is how your edited card will look (not saved yet)</p>
            </div>
            
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <!-- Digital View Card -->
                    <div class="business-card-container">
                        <div class="business-card shadow-lg">
                            <!-- Front Side -->
                            <div class="card-front">
                                <div class="card-header-section">
                                    <div class="profile-section">
                                        <div class="profile-image-wrapper">
                                            <img id="profileImage" src="" alt="Profile" class="profile-image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                                            <div class="profile-placeholder">
                                                <i class="fas fa-user"></i>
                                            </div>
                                        </div>
                                        <div class="profile-info">
                                            <h1 class="name" id="previewName">Your Name</h1>
                                            <p class="title" id="previewTitle">Your Job Title</p>
                                            <p class="company" id="previewCompany"><i class="fas fa-building me-2"></i>Company Name</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="card-body-section">
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <div class="info-card">
                                                <h3 class="section-title"><i class="fas fa-address-card me-2"></i>Contact</h3>
                                                <div class="contact-list">
                                                    <a href="#" id="previewEmailLink" class="contact-item">
                                                        <i class="fas fa-envelope"></i>
                                                        <span id="previewEmail">your.email@example.com</span>
                                                    </a>
                                                    <a href="#" id="previewPhoneLink" class="contact-item">
                                                        <i class="fas fa-phone"></i>
                                                        <span id="previewPhone">+1 (234) 567-890</span>
                                                    </a>
                                                    <a href="#" id="previewWebsiteLink" class="contact-item" style="display: none;">
                                                        <i class="fas fa-globe"></i>
                                                        <span id="previewWebsite">yourwebsite.com</span>
                                                    </a>
                                                    <div id="previewLocationDiv" class="contact-item" style="display: none;">
                                                        <i class="fas fa-map-marker-alt"></i>
                                                        <span id="previewLocation">City, Country</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="info-card">
                                                <h3 class="section-title"><i class="fas fa-user-circle me-2"></i>About</h3>
                                                <p class="about-text" id="previewAbout">Add a brief description about yourself, your expertise, and what you do.</p>
                                                
                                                <div class="social-links mt-3">
                                                    <a href="#" id="previewLinkedIn" target="_blank" class="social-btn linkedin" title="LinkedIn" style="display: none;">
                                                        <i class="fab fa-linkedin-in"></i>
                                                    </a>
                                                    <a href="#" id="previewGitHub" target="_blank" class="social-btn github" title="GitHub" style="display: none;">
                                                        <i class="fab fa-github"></i>
                                                    </a>
                                                    <a href="#" id="previewTwitter" target="_blank" class="social-btn twitter" title="Twitter" style="display: none;">
                                                        <i class="fab fa-twitter"></i>
                                                    </a>
                                                    <a href="#" id="previewInstagram" target="_blank" class="social-btn instagram" title="Instagram" style="display: none;">
                                                        <i class="fab fa-instagram"></i>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="actions-section mt-4 no-print">
                                        <a href="admin.html" class="btn btn-primary btn-lg">
                                            <i class="fas fa-arrow-left me-2"></i>Back to Editor
                                        </a>
                                        <button class="btn btn-outline-secondary btn-lg" onclick="window.print()">
                                            <i class="fas fa-print me-2"></i>Print Preview
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="theme.js"></script>
    <script>
        // Load preview data from sessionStorage (passed from admin form)
        document.addEventListener('DOMContentLoaded', function() {
            const previewData = sessionStorage.getItem('cardPreviewData');
            
            if (previewData) {
                const data = JSON.parse(previewData);
                updatePreview(data);
                // Clear after loading
                sessionStorage.removeItem('cardPreviewData');
            } else {
                // If no preview data, redirect back to admin
                alert('No preview data found. Please use the Preview button from the Profile Editor.');
                window.location.href = 'admin.html';
            }
        });

        function updatePreview(data) {
            // Apply color customization if provided
            if (data.primaryColor && data.secondaryColor) {
                applyColorScheme(data.primaryColor, data.secondaryColor);
            }
            
            // Update basic info
            if (data.name) {
                document.getElementById('previewName').textContent = data.name;
            }
            
            if (data.title) {
                document.getElementById('previewTitle').textContent = data.title;
            }
            
            if (data.company) {
                document.getElementById('previewCompany').innerHTML = `<i class="fas fa-building me-2"></i>${data.company}`;
            }
            
            if (data.about) {
                document.getElementById('previewAbout').textContent = data.about;
            }
            
            // Update contact information
            if (data.email) {
                document.getElementById('previewEmailLink').href = `mailto:${data.email}`;
                document.getElementById('previewEmail').textContent = data.email;
            }
            
            if (data.phone) {
                document.getElementById('previewPhoneLink').href = `tel:${data.phone}`;
                document.getElementById('previewPhone').textContent = data.phone;
            }
            
            if (data.website) {
                const websiteLink = document.getElementById('previewWebsiteLink');
                websiteLink.href = data.website;
                document.getElementById('previewWebsite').textContent = data.website.replace(/^https?:\/\//, '');
                websiteLink.style.display = 'flex';
            }
            
            if (data.location) {
                const locationDiv = document.getElementById('previewLocationDiv');
                document.getElementById('previewLocation').textContent = data.location;
                locationDiv.style.display = 'flex';
            }
            
            // Update social links
            if (data.linkedin) {
                const linkedinBtn = document.getElementById('previewLinkedIn');
                linkedinBtn.href = data.linkedin;
                linkedinBtn.style.display = 'flex';
            }
            
            if (data.github) {
                const githubBtn = document.getElementById('previewGitHub');
                githubBtn.href = data.github;
                githubBtn.style.display = 'flex';
            }
            
            if (data.twitter) {
                const twitterBtn = document.getElementById('previewTwitter');
                twitterBtn.href = data.twitter;
                twitterBtn.style.display = 'flex';
            }
            
            if (data.instagram) {
                const instagramBtn = document.getElementById('previewInstagram');
                instagramBtn.href = data.instagram;
                instagramBtn.style.display = 'flex';
            }
        }
        
        // Apply custom color scheme from design settings
        function applyColorScheme(primaryColor, secondaryColor) {
            // Create gradient with custom colors
            const gradient = `linear-gradient(135deg, ${primaryColor} 0%, ${secondaryColor} 100%)`;
            
            // Apply to navbar
            const navbar = document.querySelector('.navbar');
            if (navbar) {
                navbar.style.background = gradient;
            }
            
            // Apply to card header section
            const cardHeader = document.querySelector('.card-header-section');
            if (cardHeader) {
                cardHeader.style.background = gradient;
            }
            
            // Apply to body background
            document.body.style.background = gradient;
            
            // Update CSS variables for other elements
            document.documentElement.style.setProperty('--primary-color', primaryColor);
            document.documentElement.style.setProperty('--secondary-color', secondaryColor);
            document.documentElement.style.setProperty('--gradient', gradient);
            
            // Update section titles
            const sectionTitles = document.querySelectorAll('.section-title');
            sectionTitles.forEach(title => {
                title.style.background = gradient;
                title.style.webkitBackgroundClip = 'text';
                title.style.webkitTextFillColor = 'transparent';
                title.style.backgroundClip = 'text';
            });
            
            // Update section title icons
            const titleIcons = document.querySelectorAll('.section-title i');
            titleIcons.forEach(icon => {
                icon.style.background = gradient;
                icon.style.webkitBackgroundClip = 'text';
                icon.style.webkitTextFillColor = 'transparent';
                icon.style.backgroundClip = 'text';
            });
            
            // Update contact item icons on hover
            const contactItems = document.querySelectorAll('.contact-item');
            contactItems.forEach(item => {
                item.addEventListener('mouseenter', function() {
                    this.style.background = gradient;
                });
                item.addEventListener('mouseleave', function() {
                    this.style.background = 'linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)';
                });
            });
            
            // Update buttons
            const primaryButtons = document.querySelectorAll('.btn-primary');
            primaryButtons.forEach(btn => {
                btn.style.background = gradient;
            });
            
            // Update info card hover effect with custom color
            const infoCards = document.querySelectorAll('.info-card');
            infoCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.borderColor = primaryColor;
                    this.style.boxShadow = `0 15px 40px ${primaryColor}40, 0 0 40px ${primaryColor}25`;
                });
                card.addEventListener('mouseleave', function() {
                    this.style.borderColor = 'transparent';
                    this.style.boxShadow = '';
                });
            });
        }
    </script>
</body>
</html>
